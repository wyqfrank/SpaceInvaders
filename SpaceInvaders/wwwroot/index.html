<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SignalR Groups Example</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/5.0.9/signalr.min.js"></script>
</head>
<body>

    <input type="text" id="input">
    <input type="button" value="Join server" id="submit">
    <script>
        // Create connection
        const connection = new signalR.HubConnectionBuilder()
            .withUrl("/connect")
            .build();

        // Start connection
        connection.start().then(() => {
            console.log("Connected to the hub");
        }).catch(err => console.error(err.toString()));

        document.getElementById("submit").addEventListener("click", ()=>{
            const name = document.getElementById("input").value;
            connection.invoke("RegisterPlayer", name).catch(err => console.error(err.toString()));
        });

        // Handle receiving player position
        connection.on("ReceivePlayerPosition", (playerId, x, y, z) => {
            console.log(`Player ${playerId} moved to position (${x}, ${y}, ${z})`);
        });

        // Handle player connected
        connection.on("PlayerConnected", (connectionId) => {
            console.log(`Player connected: ${connectionId}`);
        });

        // Handle player disconnected
        connection.on("PlayerDisconnected", (connectionId) => {
            console.log(`Player disconnected: ${connectionId}`);
        });

        // Handle player joined room
        connection.on("PlayerJoinedRoom", (connectionId) => {
            console.log(`Player joined room: ${connectionId}`);
        });

        // Handle player left room
        connection.on("PlayerLeftRoom", (connectionId) => {
            console.log(`Player left room: ${connectionId}`);
        });
    </script>
</body>
</html>